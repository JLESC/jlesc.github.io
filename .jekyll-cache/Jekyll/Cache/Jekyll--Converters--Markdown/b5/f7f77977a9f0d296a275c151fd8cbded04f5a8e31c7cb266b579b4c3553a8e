I"Ø
<h2 id="research-topic-and-goals">Research topic and goals</h2>

<p>There is now a large and ever-growing number of workflow systems, and we have lost hope in
encouraging users not to continue developing more. Instead, we want to focus on building
shared elements that can help us with our own systems, as well as the users of those systems
and the developers of applications that will increasingly be used as workflow elements in
simulation, analysis, search, optimization, and parameter study research campaigns.</p>

<p>As discussed briefly at JLESC 9 (in ST A1.1. Python-based Workflows &amp; Software Sustainability),
two of the common types of elements that workflow systems interact with are the end computing
systems and the preexisting applications that the workflows wrap and call. Today, users of a
workflow system have to find information about both the end points and the applications, they
have to map that information to workflow-specific configuration formats, individually customize
their workflow to use these configurations, and keep up with changes over time. Instead, we
propose a registry of compute end points and applications, where an entry could be automatically
brought in to a workflow system.</p>

<p>This requires a pair of components:</p>

<ol>
  <li>
    <p>The registry itself and a means for adding and editing entries, potentially along with curation,
or perhaps community curated, using WikiData</p>
  </li>
  <li>
    <p>A means to use entries for a given workflow system</p>
  </li>
</ol>

<p>Registry entries could be added by three different groups:</p>

<ol>
  <li>
    <p>Compute resource providers could enter their systems, and application developers could enter their
applications</p>
  </li>
  <li>
    <p>Workflow system providers could enter systems and applications that they support, or we could collect
published configurations and map them to our common schema</p>
  </li>
  <li>
    <p>Workflow developers could enter system and applications that they and their workflow users need</p>
  </li>
</ol>

<h2 id="results-for-20202022">Results for 2020â€“2022</h2>

<p>The BSC team, in the context of the eFLows4HPC project, has developed an extension of the PyCOMPSs programming model to allow the integration of 3rd party software execution within a PyCOMPSs workflow with a simple JSON description. This integration is done with a new python decorator which is located on top of a python function which represent the 3rd party software invation, as indicated below.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@software (config_file=software_description.json)
def external_software(params):
  pass
</code></pre></div></div>
<p>The software_description.json can be stored locally or retrieved from a repository and provides a description of how the software is executed, If it is a multicore binary execution, mpi application, service invocation, etc. This description is processed by the PyCOMPSs runtime which replaces the method call by the application executed indicated in the description. A code example can be found in this <a href="https://github.com/bsc-wdc/compss/blob/stable/tests/sources/local/python/1_decorator_software/src/modules/testSoftwareDecorator.py">link</a></p>

<p>In collaboration with the ECP ExaWorks project, we have contributed to the definition
and development of PSI/J, a common Python library for managing asynchronous execution
of jobs on schedulers.
We contributed to the <a href="https://exaworks.org/job-api-spec/specification.html">specification</a>
and the <a href="https://github.com/ExaWorks/psi-j-python">Python library</a>.
The evolving implementation currently supports Slurm, Cobalt, Flux, and LSF.</p>

<p>We have also worked with the Science Gateways Community Institute to provide feedback on
the <a href="https://sgci-resource-inventory.readthedocs.io/en/latest/">SGCI Resource Inventory</a>.
This initiative shares similar goals to our work in the NSF community. The inventory
includes a JSON schema and a GitHub-based flow for cataloging systems.</p>

<p>Weâ€™ve also been involved in spinning up the <a href="https://workflows.community">Workflows Community Initiative</a>,
which is another part to build buy-in for this work.</p>

<h2 id="visits-and-meetings">Visits and meetings</h2>

<h2 id="impact-and-publications">Impact and publications</h2>

<!--





-->

<ol class="bibliography"></ol>

<h2 id="future-plans">Future plans</h2>

<h3 id="contributions">Contributions:</h3>

<ol>
  <li>
    <p>A prototype of the registry itself and a means for adding and editing entries,
potentially along with curation, or perhaps community curated, using WikiData</p>
  </li>
  <li>
    <p>Methods to use registry entries in Parsl and PyCOMPs</p>
  </li>
</ol>

<h3 id="timeline">Timeline:</h3>

<p>The initial work that proposed is</p>

<ol>
  <li>defining the schema for the registry, and implementing it as a REST service</li>
  <li>building some test elements, and entering them manually</li>
  <li>building software for Parsl and PyCOMPs to import and use registry entries</li>
</ol>

<p>We originally planed to do this initial work in the summer of 2020, but due to COVID-19 disruptions, we are now planning to focus initially
on defining the registration schema and collecting resource documents in a GitHub repository during 2020.
In early 2021, we will get some experience with using them in an ad hoc fashion.  With the help of students we will develop the REST API
and integrate with Parsl over summer 2021.
Also in 2021, the use of the registry will be considered within the EU eFlows4HPC project and its integration with PyCOMPSs.
After these initial activities, we will evaluate progress and decide on next steps, which likely include a publication and bringing in additional workflow systems.</p>

<h3 id="computer-resource-needs">Computer resource needs:</h3>
<p>Very few â€“ no testing needs to be done at large scale, though we will need access
to a few HPC systems to test mechanisms for their use</p>

<h3 id="expected-results">Expected results:</h3>

<ul>
  <li>Paper describing the prototype</li>
  <li>The prototype registry</li>
  <li>Initial methods added to Parsl and PyCOMPs to use the registry</li>
</ul>

<h2 id="references">References</h2>

<ol class="bibliography"></ol>
:ET